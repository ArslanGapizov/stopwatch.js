"use strict";function Stopwatch(a){function n(){var a=document.createElement("div");a.classList.add("stopwatch"),a.appendChild(o()),a.appendChild(p()),b.appendChild(a)}function o(){var a=document.createElement("div");a.classList.add("stopwatch-header");var b=document.createElement("div");b.classList.add("stopwatch-header__watch-text"),e=document.createElement("span"),e.classList.add("stopwatch-header__hours"),f=document.createElement("span"),f.classList.add("stopwatch-header__minutes"),g=document.createElement("span"),g.classList.add("stopwatch-header__seconds"),h=document.createElement("span"),h.classList.add("stopwatch-header__milliseconds"),u(),b.appendChild(e),b.appendChild(document.createTextNode(":")),b.appendChild(f),b.appendChild(document.createTextNode(":")),b.appendChild(g),b.appendChild(document.createTextNode(":")),b.appendChild(h);var i=document.createElement("div");return i.classList.add("stopwatch-header__controls"),c=document.createElement("div"),c.classList.add("stopwatch-header__btn"),c.classList.add("stopwatch-header__btn_green"),c.classList.add("stopwatch-header__btn_start-stop"),c.innerHTML="start",d=document.createElement("div"),d.classList.add("stopwatch-header__btn"),d.classList.add("stopwatch-header__btn_red"),d.classList.add("stopwatch-header__btn_reset-lap"),d.innerHTML="reset",i.appendChild(c),i.appendChild(d),a.appendChild(b),a.appendChild(i),a}function p(){return i=document.createElement("div"),i.classList.add("stopwatch-list"),i}function q(a){var b=a,c=Math.floor(b/1e3),d=Math.floor(c/60),e=Math.floor(d/60);return b%=1e3,c%=60,d%=60,{hours:e<10?"0"+e:e,minutes:d<10?"0"+d:d,seconds:c<10?"0"+c:c,milliseconds:b<100?b<10?"00"+b:"0"+b:b}}function r(){var a=q((new Date).getTime()-k);return{hours:a.hours,minutes:a.minutes,seconds:a.seconds,milliseconds:a.milliseconds}}function s(){k||(k=(new Date).getTime()-l),j=setInterval(function(){var a=r();e.innerHTML=a.hours,f.innerHTML=a.minutes,g.innerHTML=a.seconds,h.innerHTML=a.milliseconds},50),m=!0,c.innerHTML="stop",d.innerHTML="lap",d.dataset.action="lap",d.classList.remove("stopwatch-header__btn_red"),d.classList.add("stopwatch-header__btn_green")}function t(){m=!1,clearTimeout(j),l=(new Date).getTime()-k,k=null,c.innerHTML="start",d.innerHTML="reset",d.dataset.action="reset",d.classList.remove("stopwatch-header__btn_green"),d.classList.add("stopwatch-header__btn_red")}function u(){e.innerHTML="00",f.innerHTML="00",g.innerHTML="00",h.innerHTML="000"}function v(){t(),l=0,u(),x()}function x(){i.innerHTML="",w=[],G()}function y(){var a=r(),b=new Date,c=(b.getHours()<10?"0"+b.getHours():b.getHours())+":"+(b.getMinutes()<10?"0"+b.getMinutes():b.getMinutes())+":"+(b.getSeconds()<10?"0"+b.getSeconds():b.getSeconds()),d=b.getFullYear()+"-"+(b.getMonth()<9?"0"+(b.getMonth()+1):b.getMonth()+1)+"-"+(b.getDate()<10?"0"+b.getDate():b.getDate()),e={text:"",timer:a.hours+":"+a.minutes+":"+a.seconds+":"+a.milliseconds,time:c,date:d};return w.push(e),e}function z(a){for(var b=0;b<w.length;b++)if(w[b].timer==a)return w.splice(b,1),void(0==w.length&&G())}function A(a){E||F();var b=document.createElement("div");b.classList.add("stopwatch-list__item");var c=document.createElement("div");c.classList.add("stopwatch-list__input");var d=document.createElement("input");d.classList.add("stopwatch-list__input_inner"),c.appendChild(d);var e=document.createElement("div");e.classList.add("stopwatch-list__watch-text"),e.innerHTML=a.timer;var f=document.createElement("div");f.classList.add("stopwatch-list__time"),f.innerHTML=a.time;var g=document.createElement("div");g.classList.add("stopwatch-list__date"),g.innerHTML=a.date;var h=document.createElement("div");h.classList.add("stopwatch-list__close"),b.appendChild(c),b.appendChild(e),b.appendChild(f),b.appendChild(g),b.appendChild(h),i.appendChild(b)}function B(){var a=y();A(a)}function C(a){z(a.querySelector(".stopwatch-list__watch-text").innerHTML),a.parentNode.removeChild(a)}function D(a,b){for(var c=0;c<w.length;c++)if(w[c].timer==b)return void(w[c].text=a)}function F(){E=document.createElement("div"),E.innerHTML="download CSV",E.classList.add("stopwatch__btn-csv"),E.addEventListener("click",function(){var a=H(),b=document.createElement("a");b.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),b.setAttribute("download","stopwatch.csv"),b.style.display="none",document.body.appendChild(b),b.click(),document.body.removeChild(b)}),b.appendChild(E)}function G(){b.removeChild(E),E=null}function H(){var a=[];return a.push("number,text,timer,time,date"),w.forEach(function(b,c){var d=c+1+","+b.text+","+b.timer+","+b.time+","+b.date;a.push(d)}),a.join("\n")}var c,d,e,f,g,h,i,j,k,b=a.elem,l=0,m=!1;n(),this.getTime=r,this.start=s,this.stop=t,c.addEventListener("click",function(){m?t():s()}),d.addEventListener("click",function(){"reset"==this.dataset.action?v():"lap"==this.dataset.action&&B()}),this.reset=v;var w=[];this.lapTime=B,b.addEventListener("click",function(a){if(a.target.closest(".stopwatch-list__close")){var b=a.target.closest(".stopwatch-list__item");C(b)}}),b.addEventListener("input",function(a){var b=a.target.closest(".stopwatch-list__input_inner");if(b){var c=b.closest(".stopwatch-list__item");D(b.value,c.querySelector(".stopwatch-list__watch-text").innerHTML)}});var E}
